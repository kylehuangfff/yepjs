!function(e){if(!e.yepjs){var o,a,h=function(t){o.wait(t)};h.version="1.1.0",h.isArray=d,h.isString=c,h.isObject=s,h.isFunction=p,h.isUndefined=g,h.forEach=function(t,e){if(d(t))for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},h.basePath="",h.config=function(t){var n=function(t){for(var e in t){if("css"===e||"js"===e)throw new Error("yepjs.config 不允许使用js或css做为字段名");s(t[e])&&n(t[e])}};for(var e in n(t),t)h.config[e]=t[e]},h.define=function(o,a){a=a||{};var f,s,t=e;if(g(o))throw new Error("yepjs.define参数错误，name值未传递");return a.ns=a.ns||a.NS||a.namespace,c(a.ns)||(t=this,a.ns="yepjs"),f=a.ns.split("."),s=f.length,function(t,e){var n=arguments.callee,r=f[t],i=e[r];if(t!==s&&r){if(!i){if(i=e[r]={},t===s-1){if(i[o])throw new Error(a.ns+"."+o+"重复定义，请检查是否文件重复引入或者命名空间冲突");return i[o]=a.fields||a.field||{},i[o]}return n(++t,i)}if(i){if(t===s-1){if(i[o])throw new Error(a.ns+"."+o+"重复定义，请检查是否文件重复引入或者命名空间冲突");return i[o]=a.fields||a.field||{},i[o]}return n(++t,i)}}}(0,t)},h.loader=function(){var s=document,i=s.getElementsByTagName("script"),c=i[0].parentNode,u={},l={listeners:[],add:function(t,e){this.listeners.push({loader:t,url:e})},send:function(t){for(var e,n=0,r=this.listeners.length;n<r;n++)(e=this.listeners[n]).url===t&&"executed"!==e.loader.files[t]&&(e.loader.files[t]="executed",e.loader.triggerFn())}};h.basePath=function(){for(var t=/^(.*?)yep(?:\.min)?\.js/i,e=0,n=i.length;e<n;e++)if(t.test(i[e].getAttribute("src"))){a=i[e].getAttribute("data-config");var r=i[e].getAttribute("data-path");return r||RegExp.$1}return""}();var t=function(){this.files={},this.waitfn=[]};return t.prototype.isReady=function(t){var e=this.files;if(d(t)&&0<t.length){for(var n=0;n<t.length;n++)if("executed"!==e[t[n]])return!1;return!0}for(var r in e)if("executed"!==this.files[r])return!1;return!0},t.prototype.load=function(t,e){var n,r,i,o,a,f=this;{if(t=h.handlePath(t),g(f.files[t])||"waiting"===f.files[t])return g(u[t])||"waiting"===u[t]?(/\.css(?:\?|$)/.test(t)?(o=t,(a=s.createElement("link")).href=o,a.rel="stylesheet",a.type="text/css",n=a):(r=t,(i=s.createElement("script")).setAttribute("src",r),i.setAttribute("type","text/javascript"),i.setAttribute("charset","utf-8"),n=i),f.files[t]=u[t]="loading",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,f.files[t]=u[t]="executed",l.send(t),p(e)&&e(),f.triggerFn())}:n.onload=function(){f.files[t]=u[t]="executed",l.send(t),p(e)&&e(),f.triggerFn()},n.onerror=function(){throw new Error(t+"加载失败！")},c.appendChild(n),this):(f.files[t]=u[t],void("executed"!==u[t]?l.add(f,t):(p(e)&&e(),f.triggerFn())));"executed"===f.files[t]?p(e)&&e():p(e)&&f.wait(e,[t])}},t.prototype.triggerFn=function(){for(var t,e=[];t=this.waitfn.shift();)d(t.files)?this.isReady(t.files)?p(t.fn)&&t.fn():e.push(t):this.isReady()?p(t.fn)&&t.fn():e.push(t);this.waitfn=e},t.prototype.wait=function(t,e){return this.waitfn.push({fn:t,files:e}),this.triggerFn(),this},h.mainLoader=o=new t,t}(),h.getPath=function(a){var n;if(/^(?:http|\/\/)/.test(a)||/(?:\.js|\.css)(?:\?|$)/.test(a))return a;if(!a)throw new Error(a+"文件路径未定义");var f=(a=a.replace(/\?(.*?)$/,function(t){return n=RegExp.$1,""})).split(".");if(f.length<1)throw new Error("模块 ["+a+"] 文件路径未定义");var r=function(t,e){var n=arguments.callee,r=f[t],i=e[r];if(r){if("*"===r){if(s(e)){var o=[];return function(t){var e=arguments.callee;for(var n in t){var r=t[n];c(r)?o.push(r):s(r)&&e(r)}}(e),o}throw new Error("["+a+"] 查找不到子模块")}if(!i)throw new Error("模块 ["+a+"] 文件路径未定义");return n(++t,i)}return e}(0,h.config);return n&&function(){function t(t){return-1<t.indexOf("?")?t+="&"+n:t+="?"+n,t}if(c(r))r=t(r);else if(d(r))for(var e=0;e<r.length;e++)r[e]=t(r[e])}(),r},h.handlePath=function(t){if(-1<t.indexOf("http")||/^\/\//.test(t))return t;var e,n=h.basePath.split("/"),r=t.split("/");if(""===r[0])return t;for(""===n[n.length-1]&&n.pop();e=r.shift();)".."===e?n.pop():"."!==e&&n.push(e);return n.join("/")},h.use=function(){var t=arguments,e=0;t.callee;0!==t.length&&o.wait(function(){for(;e<t.length;e++)!function(t){var n=new h.loader;c(t.name)&&(t.name=[t.name]),d(t.name)&&(h.forEach(t.name,function(t){var e=h.getPath(t);c(e)&&(e=[e]),h.forEach(e,function(t){n.load(t)})}),n.wait(function(){o.wait(t.callback)}))}(t[e])})},h.require=function(t){if(!g(t)&&t){var e,r=[],n=!1;if(c(t))e=[t];else{if(!d(t))throw new Error("yepjs.require参数错误，只支持字符串和数组参数");e=t,n=!0}h.forEach(e,function(t){var e=h.getPath(t);r=r.concat(e)});n?(h.forEach(r,function(t,e){var n=h.handlePath(t);o.files[n]||(o.files[n]="waiting")}),function(t){var e=arguments.callee,n=r[t];g(n)||o.load(n,function(){e(++t)})}(0)):h.forEach(r,function(t){o.load(t)})}},e.yepjs=h,g(a)||h.require(a)}function c(t){return"[object String]"===Object.prototype.toString.call(t)}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){return"[object Object]"===Object.prototype.toString.call(t)&&null!==t}function p(t){return"[object Function]"===Object.prototype.toString.call(t)}function g(t){return void 0===t}}(window);