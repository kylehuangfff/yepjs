!function(e){if(!e.yepjs){var i,a,s,c,t,l=document,o=l.getElementsByTagName("script"),u=o[0].parentNode,h=!!window.attachEvent||-1<navigator.userAgent.toLowerCase().indexOf("msie"),f=-1<navigator.userAgent.toLowerCase().indexOf("webkit"),d="preloading",p="preloaded",g="waiting",w="loading",v="executed",y=function(t){i.wait(t)};y.version="1.2.0",y.isArray=j,y.isString=b,y.isObject=r,y.isFunction=E,y.isUndefined=m,y.forEach=function(t,e){if(j(t))for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},y.basePath=function(){for(var t=/^(.*?)yep(?:\.min)?\.js/i,e=0,n=o.length;e<n;e++)if(t.test(o[e].getAttribute("src"))){a=o[e].getAttribute("data-config");var r=o[e].getAttribute("data-path");return r||RegExp.$1}return""}(),y.config=function(t){var n=function(t){for(var e in t){if("css"===e||"js"===e)throw new Error("yepjs.config 不允许使用js或css做为字段名");r(t[e])&&n(t[e])}};for(var e in n(t),t)y.config[e]=t[e]},y.define=function(a,o){o=o||{};var f,s,t=e;if(m(a))throw new Error("yepjs.define参数错误，name值未传递");return o.ns=o.ns||o.NS||o.namespace,b(o.ns)||(t=this,o.ns="yepjs"),f=o.ns.split("."),s=f.length,function(t,e){var n=arguments.callee,r=f[t],i=e[r];if(t!==s&&r){if(!i){if(i=e[r]={},t===s-1){if(i[a])throw new Error(o.ns+"."+a+"重复定义，请检查是否文件重复引入或者命名空间冲突");return i[a]=o.fields||o.field||{},i[a]}return n(++t,i)}if(i){if(t===s-1){if(i[a])throw new Error(o.ns+"."+a+"重复定义，请检查是否文件重复引入或者命名空间冲突");return i[a]=o.fields||o.field||{},i[a]}return n(++t,i)}}}(0,t)},y.loader=(s={},c={listeners:[],add:function(t,e){this.listeners.push({loader:t,url:e})},send:function(t,e){e=e||v;for(var n,r=0,i=this.listeners.length;r<i;r++)(n=this.listeners[r]).url===t&&n.loader.files[t]!==e&&(n.loader.files[t]=e,n.loader.triggerFn())}},(t=function(t){this.files={},this.waitfn=[]}).prototype.isReady=function(t,e){var n,r=this.files;if(j(t)&&0<t.length){for(var i=0;i<t.length;i++)if(r[t[i]]!==v&&r[t[i]]!==e)return!1;return!0}for(var a in r)if((n=this.files[a])!==v&&n!==e)return!1;return!0},t.prototype.load=function(t,e){var n=this;if(m(n.files[t])||n.files[t]===g||n.files[t]===p){var r,i,a,o,f;if(m(s[t])||s[t]===g||s[t]===p)return/\.css(?:\?|$)/.test(t)?(o=t,(f=l.createElement("link")).href=o,f.rel="stylesheet",f.type="text/css",r=f):(i=t,(a=l.createElement("script")).setAttribute("src",i),a.setAttribute("type","text/javascript"),a.setAttribute("charset","utf-8"),r=a),n.files[t]=s[t]=w,r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,n.files[t]=s[t]=v,c.send(t),E(e)&&e(),n.triggerFn())}:r.onload=function(){n.files[t]=s[t]=v,c.send(t),E(e)&&e(),n.triggerFn()},r.onerror=function(){throw new Error(t+"加载失败！")},h?u.appendChild(r):setTimeout(function(){u.appendChild(r)},0),this;switch(n.files[t]=s[t],s[t]){case v:E(e)&&e(),n.triggerFn();break;case d:c.add(n,t),n.wait(function(){n.load(t,e)},[t],p);break;case w:c.add(n,t),n.wait(function(){E(e)&&e()},[t],v)}}else switch(n.files[t]){case v:E(e)&&e();break;case d:n.wait(function(){n.load(t,e)},[t],p);break;case w:n.wait(function(){E(e)&&e()},[t],v)}},t.prototype.preload=function(t,e){var n=this,r=n.files[t];if(!m(r))return r===v||r===p?E(e)&&e():E(e)&&n.wait(e,[t],p),this;if(!m(r=s[t]))return(n.files[t]=r)===v||r===p?E(e)&&e():(c.add(n,t),E(e)&&n.wait(e,[t],p)),this;n.files[t]=s[t]=d;var i,a=function(){n.files[t]=s[t]=p,E(e)&&e(),n.triggerFn(),c.send(t,p)},o=t.slice(t.lastIndexOf("."));return-1<".png.jpg.jpeg.bmp.gif.webp".indexOf(o)?((i=new Image).onload=a,i.src=t):(h||f?((i=l.createElement("link")).href=t,i.rel="stylesheet",i.type="text/css"):((i=l.createElement("object")).data=t,i.width=0,i.height=0),i.onload=function(){l.body.removeChild(i),a()},l.body.appendChild(i)),this},t.prototype.triggerFn=function(){for(var t,e=[];t=this.waitfn.shift();)j(t.files)?this.isReady(t.files,t.loadType)?E(t.fn)&&t.fn():e.push(t):this.isReady(null,t.loadType)?E(t.fn)&&t.fn():e.push(t);this.waitfn=e},t.prototype.wait=function(t,e,n){return this.waitfn.push({fn:t,files:e,loadType:n||v}),this.triggerFn(),this},y.mainLoader=i=new t,t),y.getPath=function(a){var n;if(/^(?:http|\/\/)/.test(a)||/(?:\.js|\.css)(?:\?|$)/.test(a))return a;if(!a)throw new Error(a+"文件路径未定义");var o=(a=a.replace(/\?(.*?)$/,function(t){return n=RegExp.$1,""})).split(".");if(o.length<1)throw new Error("模块 ["+a+"] 文件路径未定义");var r=function(t,e){var n=arguments.callee,r=o[t],i=e[r];if(r){if(!i)throw new Error("模块 ["+a+"] 文件路径未定义");return n(++t,i)}return e}(0,y.config);return n&&function(){function t(t){return-1<t.indexOf("?")?t+="&"+n:t+="?"+n,t}if(b(r))r=t(r);else if(j(r))for(var e=0;e<r.length;e++)r[e]=t(r[e])}(),r},y.handlePath=function(t){if(-1<t.indexOf("http")||/^\/\//.test(t))return t;var e,n=y.basePath.split("/"),r=t.split("/");if(""===r[0])return t;for(""===n[n.length-1]&&n.pop();e=r.shift();)".."===e?n.pop():"."!==e&&n.push(e);return n.join("/")},y.use=function(){var t=arguments,e=0;t.callee;0!==t.length&&i.wait(function(){for(;e<t.length;e++)!function(t){var n=new y.loader;b(t.name)&&(t.name=[t.name]),j(t.name)&&(y.forEach(t.name,function(t){var e=y.handlePath(y.getPath(t));b(e)&&(e=[e]),y.forEach(e,function(t){n.load(t)})}),n.wait(function(){i.wait(t.callback)}))}(t[e])})},y.require=function(t){if(!m(t)&&t){var e,r=[],n=!1;if(b(t))e=[t];else{if(!j(t))throw new Error("yepjs.require参数错误，只支持字符串和数组参数");e=t,n=!0}y.forEach(e,function(t){var e=y.handlePath(y.getPath(t));r=r.concat(e)});n?(y.forEach(r,function(t,e){i.preload(t)}),i.wait(function(){y.forEach(r,function(t,e){i.files[t]&&i.files[t]!==p||(i.files[t]=g)}),function(t){var e=arguments.callee,n=r[t];m(n)||i.load(n,function(){e(++t)})}(0)},r,p)):y.forEach(r,function(t){i.load(t)})}},e.yepjs=y,m(a)||y.require(a)}function b(t){return"[object String]"===Object.prototype.toString.call(t)}function j(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return"[object Object]"===Object.prototype.toString.call(t)}function E(t){return"[object Function]"===Object.prototype.toString.call(t)}function m(t){return void 0===t}}(window);